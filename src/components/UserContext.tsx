"use client"; 
// ุงู ุฏุณุชูุฑ ุจุฑุง ูุนุงู ฺฉุฑุฏู ูฺฺฏโูุง ุณูุช ฺฉูุงูุช ุฏุฑ Next.js 13+ ุงุณุชูุงุฏู ูโุดูุฏ. (ูุฎุตูุต ูุงูโูุง ฺฉู ุงุฒ useState/useEffect ู ... ุงุณุชูุงุฏู ูโฺฉููุฏ)

// -----------------------------
// ุงุจุฒุงุฑูุง ููุฑุฏ ูุงุฒ ุฑุง ุงุฒ React ุงููพูุฑุช ูโฺฉูู:
import { createContext, useContext, useState, ReactNode } from "react";

// ุชุนุฑู ููุน (Type) ฺฉุงุฑุจุฑ:
// ููุน "User" ูโุชููู ฺฉ ุดุก ุดุงูู fullName ุจุงุดูุ ุง null ุจุงุดู (ุจุฑุง ููุช ฺฉุงุฑุจุฑ ูุงฺฏู ูฺฉุฑุฏู)
type User = {
  fullName: string;
} | null;

// ๐ถ ุชุนุฑู context ฺฉุงุฑุจุฑ:

// โฌ ุงู ูุณูุช ยซุชุงูพ ุฌูุฑฺฉ (Generic Type)ยป ุจุฑุง createContext ูุณุช
// ุนู ุจู createContext ูโฺฏู ฺฉู context ูุฑุงุฑู ฺฉ ุดุก ุจุงุดู ุดุงูู:
//    - user: ุงุฒ ููุน User (ฺฉู ูโุชููู null ุง { fullName: string } ุจุงุดู)
//    - setUser: ุชุงุจุน ฺฉู ฺฉ User ุฏุฑุงูุช ูโฺฉูู ู ฺุฒ ุจุฑููโฺฏุฑุฏููู (void)
const UserContext = createContext<{
  user: User;
  setUser: (user: User) => void;
}>(

  // โฌ ุงู ูุณูุช ููุฏุงุฑ ุงููู (๐ก Default Value) ูุณุช ฺฉู ุจู createContext ุฏุงุฏู ุดุฏู
  {
    user: null,              // ุฏุฑ ุญุงูุช ุงูููุ ูฺ ฺฉุงุฑุจุฑ ูุงฺฏู ูุณุช
    setUser: () => {},       // ุชุงุจุน ุฎุงูุ ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุฎุทุง ุฏุฑ ุฒูุงู ุงุณุชูุงุฏู ุฎุงุฑุฌ ุงุฒ Provider
  }
);

// ๐น ุญุงูุง ฺฉ Provider ุชุนุฑู ูโฺฉูู ฺฉู context ุฑุง ุจุฑุง ุงุฌุฒุง ุฏุงุฎูโุงุด ูุฑุงูู ูโฺฉูุฏ
export function UserProvider({ children }: { children: ReactNode }) {
  // state ูุฑุจูุท ุจู ฺฉุงุฑุจุฑ ุฑุง ุจุง useState ูฺฏู ูโุฏุงุฑู
  const [user, setUser] = useState<User>(null); // ุญุงูุช ุงููู: null (ุนู ูููุฒ ฺฉุงุฑุจุฑ ูุงฺฏู ูุณุช)

  return (
    // ุงูุฌุง ููุฏุงุฑ context ุฑุง ุจู Provider ูโุฏูู ุชุง ุจูู ุงุฌุฒุง ุจุชูุงููุฏ ุจู ุขู ุฏุณุชุฑุณ ุฏุงุดุชู ุจุงุดูุฏ
    <UserContext.Provider value={{ user, setUser }}>
      {children}
    </UserContext.Provider>
  );
}

// ๐ธ ุงู ุชุงุจุน ุณูุงุฑุด (Custom Hook) ุจุฑุง ุฏุณุชุฑุณ ุฑุงุญุชโุชุฑ ุจู context ุงุณุชูุงุฏู ูโุดูุฏ
export const useUser = () => useContext(UserContext);

// ุญุงูุง ูุฑ ฺฉุงููพูููุช ฺฉู ุฏุงุฎู <UserProvider> ูุฑุงุฑ ฺฏุฑูุชู ุจุงุดูุ ูโุชููู ุงุฒ useUser() ุงุณุชูุงุฏู ฺฉูู
// ู ุจู user ู setUser ุฏุณุชุฑุณ ุฏุงุดุชู ุจุงุดู
